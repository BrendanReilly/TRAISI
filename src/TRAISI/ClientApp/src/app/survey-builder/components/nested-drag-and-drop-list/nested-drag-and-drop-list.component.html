<div class="row page-questions">
	<smooth-dnd-container [shouldAcceptDrop]="shouldAcceptDrop" id="page-question-container" class="col-md-12" [class.drag-over]="dragOverContainer['main list']" [class.page-questions-empty]="pageQuestions.length == 0" [groupName]="'builder-page'" [lockAxis]="'y'" [getChildPayload]="getQuestionPayload" (drop)="onDrop($event)" (dragStart)="onDragStart($event)" (dragEnd)="onDragEnd($event)" (dragEnter)="onDragEnter('main list')" (dragLeave)="onDragLeave('main list')">
		<smooth-dnd-draggable *ngFor="let item of pageQuestions; index as i">
			<ng-container *ngIf="item.typeName != 'Survey Part'; else surveyPart">
				<div class="page-question" data-toggle="collapse" [attr.data-target]= "'#collapseExample-' + i" aria-expanded="false" [attr.aria-controls]="'collapseExample-' + i">
						<div class="icon">
								<i class="fa" [ngClass]="item.icon"></i>
						</div>
					{{item.typeName}}
					<div class="config-icon">
						<a  (click)="editQuestionConfiguration($event, item)">
							<i class="fa fa-cog"></i>
						</a>
					</div>
				</div>
				<div class="collapse details" [attr.id]= "'collapseExample-' + i">
					<div class="question-options">Testing</div>
				</div>
			</ng-container>
			<ng-template #surveyPart>
				<div class="page-part" data-toggle="collapse" [attr.data-target]= "'#collapseExample-' + i" aria-expanded="false" [attr.aria-controls]="'collapseExample-' + i">
						<div class="icon">
								<i class="fa" [ngClass]="item.icon"></i>
						</div>
					{{item.typeName}}
					<div class="config-icon">
						<a  (click)="editQuestionConfiguration(item)">
							<i class="fa fa-cog"></i>
						</a>
					</div>
				</div>
				<div class="question-part-container collapse show" [class.drag-over]="dragOverContainer[item.partId]" [attr.id]= "'collapseExample-' + i" [class.page-questions-empty]="qPartQuestions.get(item.partId).length == 0">
					<smooth-dnd-container [shouldAcceptDrop]="shouldAcceptDropPart" [lockAxis]="'y'"  [groupName]="'builder-part-'+item.partId" [getChildPayload]="getQuestionInPartPayload(item.partId)" (dragStart)="onDragStart($event)" (drop)="onDropInPart(item.partId,$event)" (dragEnter)="onDragEnter(item.partId)" (dragLeave)="onDragLeave(item.partId)">
						<smooth-dnd-draggable *ngFor="let innerItem of qPartQuestions.get(item.partId); index as j">
							<div class="page-question" data-toggle="collapse" [attr.data-target]= "'#collapseExample-' + i + '-' + j" aria-expanded="false" [attr.aria-controls]="'collapseExample-' + i + '-' + j">
								<div class="icon">
										<i class="fa" [ngClass]="innerItem.icon"></i>
								</div>
							{{innerItem.typeName}}
							<div class="config-icon">
								<a  (click)="editQuestionConfiguration(item)">
									<i class="fa fa-cog"></i>
								</a>
							</div>
						</div>
						<div class="collapse details" [attr.id]= "'collapseExample-' + i + '-' + j">
							<div class="question-options">Testing Part</div>
						</div>
						</smooth-dnd-draggable>
					</smooth-dnd-container>
					<div class="question-part-container-placeholder" [hidden]="qPartQuestions.get(item.partId).length > 0">Drop Questions Here</div>
				</div>
			</ng-template>
		</smooth-dnd-draggable>
	</smooth-dnd-container>
</div>

<div class="modal fade" bsModal #configurationModal="bs-modal" [config]="{backdrop: 'static'}" tabindex="-1">
	<div class="modal-dialog modal-lg">
		<div class="modal-content">
			<div class="modal-header">
				<h4 class="modal-title pull-left"><i class="fa fa-user-circle-o"></i> {{ addingNewQuestion ? 'Add New Question' : 'Editing Question Configuration' }}</h4>
				<button type="button" class="close pull-right" title="Close" (click)="cancelConfiguration()">
					<span aria-hidden="true">&times;</span>
				</button>
			</div>
			<div class="modal-body">
				<app-question-configuration (configResult)="processConfiguration($event)"></app-question-configuration>
			</div>
		</div>
	</div>
</div>
