<div class="details-wrapper" [class.disable-clicks]="reordering">
	<ng-container *ngFor="let qOptionDefinition of questionOptionDefinitions; let i = index">
		<h5 class="text-center">{{ qOptionDefinition.name }}</h5>
		<smooth-dnd-container [dragHandleSelector]="'.option-handle'" [groupName]="'optionlist-' + question.id + '-' + i" (drop)="onDrop($event, qOptionDefinition.name)"
		 [getChildPayload]="getOptionPayload" [lockAxis]="'y'">
			<smooth-dnd-draggable *ngFor="let item of items.get(qOptionDefinition.name)">
				<div class="form-group row response-option-container">
					<div class="input-group col-md-12">
						<input type="text" class="form-control optionKey" id="code" [(ngModel)]="item.code"/>
						<input type="text" class="form-control optionValue" id="label" [(ngModel)]="item.optionLabel.value" />
						<div class="input-group-append">
							<button type="button" class="btn" (click)="saveOption(item)" [class.btn-success]="optionChanged(item)" [disabled]="!optionChanged(item)">
								<i class="fas fa-save"></i>
							</button>
							<button type="button" [disabled]="items.get(qOptionDefinition.name).length <= 1" class="btn btn-danger" (click)="deleteOption(qOptionDefinition.name, item.order)">
								<i class="fas fa-trash-alt"></i>
							</button>
							<button type="button" class="btn btn-gray option-handle">
								<i class="fas fa-bars"></i>
							</button>
						</div>
					</div>
				</div>
			</smooth-dnd-draggable>
		</smooth-dnd-container>
		<div class="form-group row response-option-container" *ngIf="pendingOption">
			<div class="input-group col-md-12">
				<input type="text" class="form-control optionKey" id="code" [(ngModel)]="pendingOption.code"/>
				<input type="text" class="form-control optionValue" id="label" [(ngModel)]="pendingOption.optionLabel.value" />
				<div class="input-group-append">
					<button type="button" class="btn" (click)="savePendingOption()" [class.btn-success]="pendingOptionValid()" [disabled]="!pendingOptionValid()">
						<i class="fas fa-save"></i>
					</button>
					<button type="button" class="btn btn-danger" (click)="deletePendingOption()">
						<i class="fas fa-trash-alt"></i>
					</button>
				</div>
			</div>
		</div>
		<div class="row justify-content-center" *ngIf="qOptionDefinition.isMultipleAllowed && !pendingOption">
			<div>
				<button class="btn btn-primary" (click)="addOption(qOptionDefinition.name)">
					<i class="fas fa-plus-circle"></i> Add Option
				</button>
			</div>
		</div>
		<div class="row" *ngIf="i < questionOptionDefinitions.length - 1">
			<div class="col-md-12">
				<hr class="edit-separator-hr" />
			</div>
		</div>
	</ng-container>
	<div class="open-question-placeholder text-center" *ngIf="questionOptionDefinitions.length == 0">Open Question</div>
</div>
