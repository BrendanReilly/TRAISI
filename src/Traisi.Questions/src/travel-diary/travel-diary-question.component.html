<div class="add-event-overlay">
	<span class="btn-group" dropdown container="body" placement="top right" [dropup]="isDropup">
		<button type="button" class="btn btn-primary" (click)="newEvent()">Add Activity</button>
		<button
			id="button-split"
			type="button"
			dropdownToggle
			class="btn btn-primary dropdown-toggle dropdown-toggle-split"
			aria-controls="dropdown-split"
		>
			<span class="caret"></span>
			<span class="sr-only">Split button</span>
		</button>
		<ul id="dropdown-split" *dropdownMenu class="dropdown-menu" role="menu" aria-labelledby="button-split">
			<li role="menuitem">
				<a [routerLink]="" class="dropdown-item" (click)="resetEvents()">Reset travel diary</a>
			</li>
			<li role="menuitem">
				<a [routerLink]="" class="dropdown-item" (click)="clearEvents()">Clear all trips</a>
			</li>
		</ul>
	</span>
	<span
		class="view-validation-errors"
		[popover]="popTemplate"
		triggers=""
		#pop="bs-popover"
		(click)="pop.toggle()"
		*ngIf="!isTravelDiaryValid"
	>
		<i class="fas fa-exclamation-triangle warning-icon"></i>Missing Information
	</span>
</div>

<div class="travel-diary-question" [style.height.px]="containerHeight" *ngIf="isComponentLoaded | async">
	<traisi-travel-dairy-day-view-scheduler
		[viewDate]="viewDate"
		[events]="events"
		[dayStartHour]="0"
		[dayEndHour]="24"
		[hourSegments]="1"
		[refresh]="events$"
		[users]="users | async"
		#schedule
		(eventClicked)="eventClicked($event)"
	>
	</traisi-travel-dairy-day-view-scheduler>
</div>

<traisi-travel-diary-edit-dialog
	(eventDeleted)="eventDeleted($event)"
	(newEventSaved)="newEntrySaved($event)"
	(eventSaved)="eventSaved($event)"
	#entryDialog
></traisi-travel-diary-edit-dialog>

<ng-template #popTemplate><p>

The dravel diary is missing information for some events. Click on events with an orange border to fill in the missing information.</p>

<p>The diary also requires that there are no two consecutive home events appearing for a household member.</p>

<p>Overlapping departure times are also not allowed for the travel diary input.</p>

</ng-template>
